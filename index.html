<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="style.css" rel="stylesheet">
    <script src="libraries/papaparse.min.js"></script>
    <script defer src="script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    
    <link rel="icon" type="image/x-icon" href="icons/favicon.ico">

    <title>Nafrea</title>
</head>

<body>
    <div id="stats_window_div">
        <img src="Images/close.svg" id="close_stats_img" onclick="close_stats()">
        <div id="timeline_stats">
            <canvas id="water_timeline_stats"></canvas>
        </div>
        <div id="stats_right_div">
            <div id="stats_time_past" class="stats_texts">Durée écoulée : 0 ans 0 mois</div>
            <div id="pie_chart_conso_div">
                <canvas id="pie_chart_conso_canvas"></canvas>
            </div>
        </div>
    </div>
    <div id="header">
        <h1 id="Title">Nafrea</h1>
        <div id="infos">
            <div id="Habitants_div" class="compteur_div">
                <div id="Habitants_counter">
                    1000
                </div>
                <div id="Habitants_img">
                    <img class="compteurs_img" src="Images/person.svg">
                </div>
            </div>
            <div id="Entrées_div" class="compteur_div">
                <div id="Entrées_counter">
                    400 Ml/j
                </div>
                <div id="Entrées_img">
                    <img class="compteurs_img" src="Images/arrow_downward.svg">
                </div>
            </div>
            <div id="Sorties_div" class="compteur_div">
                <div id="Sorties_counter">
                    300 Ml/j
                </div>
                <div id="Sorties_img">
                    <img class="compteurs_img" src="Images/arrow_upward.svg">
                </div>
            </div>
        </div>
        <div id="top_buttons">
            <button class="top_button"><img class="top_buttons_img" src="Images/info.svg"></button>
            <button class="top_button" id="info_top_button" onclick="toggle_stats()"><img class="top_buttons_img" src="Images/stats.svg"></button>
            <button class="top_button" onclick=""><img class="top_buttons_img" src="Images/add.svg"></button>
            <button class="top_button"><img class="top_buttons_img" src="Images/upload.svg"></button>
            <button class="top_button" onclick="export_water_data()"><img class="top_buttons_img" src="Images/download.svg"></button>
        </div>
    </div>
    <div id="main_window">
        <div id="side_menu">
            <div id="real_menu">
                <div class="search_bar">
                    <img src="Images/search.svg" class="search_icon">
                    <input type="text" class="search_form">
                </div>
                <div class="preconfig" onclick="import_config()">Importer une configuration</div>
                <div class="preconfig" onclick="export_config()">Exporter la configuration</div>
                
                <div class="category">
                    <p class="category_title">Paramètres généraux</p>
                    <div class="parameter_div">
                        <fieldset id="ssp_scenario">
                            <legend>Choix du scénario climatique :</legend>
                            
                            <div>
                                <input type="radio" name="scenario" value="126" onChange="change_climatic_scenario(this.value)">
                                <label for="126">SSP1-2.6</label>
                            </div>

                            <div>
                                <input type="radio" name="scenario" value="245" checked onChange="change_climatic_scenario(this.value)">
                                <label for="245">SSP2-4.5</label>
                            </div>
                            
                            <div>
                                <input type="radio" name="scenario" value="370" onChange="change_climatic_scenario(this.value)">
                                <label for="370">SSP3-7.0</label>
                            </div>
                        </fieldset>
                    </div>
                    <div class="parameter_div">
                        <p class="parameter_name" id="map_size_label">Taille de la carte (8)</p>
                        <input class="settings_range" id="map_size_input" type="range" min="3" max="20" value="8" step="1" oninput="setting_changed('size',this.value)">
                    </div>
                    <div class="parameter_div">
                        <p class="parameter_name"  id="depth_label">Profondeur de la nappe (10 m)</p>
                        <input class="settings_range" id="depth_input" type="range" min="5" max="100" value="10" step="5" oninput="setting_changed('depth', this.value)">
                    </div>
                    <div class="parameter_div">
                        <p class="parameter_name"  id="permeability_coeff_label">Coefficient de perméabilité (1e-5 m/s)</p>
                        <input class="settings_range" id="permeability_coeff_input" type="range" min="-8" max="-3" value="-5" step="1" oninput="setting_changed('permeability_coeff', this.value)">
                    </div>
                    <div class="parameter_div">
                        <p class="parameter_name"  id="capacity_label">Capacité de la nappe (15e9 m³)</p>
                        <input class="settings_range" id="capacity_input" type="range" min="1" max="50" value="15" step="1" oninput="setting_changed('capacity', this.value)">
                    </div>
                    <div class="parameter_div">
                        <p class="parameter_name"  id="inclinaison_label">Inclinaison (5°)</p>
                        <input class="settings_range" id="inclinaison_input" type="range" min="0" max="50" value="5" step="1" oninput="setting_changed('inclinaison', this.value)">
                    </div>
                    <div class="parameter_div">
                        <p class="parameter_name"  id="rain_intensity_label">Intensité des précipitations (100%)</p>
                        <input class="settings_range" id="rain_intensity_input" type="range" min="25" max="200" value="100" step="5" oninput="setting_changed('rain_intensity', this.value)">
                    </div>
                </div>
                <div class="category" style="display: grid;">
                    <p class="category_title">Bâtiments</p>
                    
                    <div id="building_buttons_div">
                        <div id="copy_paste_div">
                            <button class="buildings_button copy_paste_button" id="copy_button" onclick="copy_building()">Copier</button>
                            <button class="buildings_button copy_paste_button" id="paste_button" onclick="paste_building()">Coller</button>
                        </div>
                        <button class="buildings_button" onclick="place_building('city')">Placer une ville</button>
                        <button class="buildings_button" onclick="place_building('farm')">Placer une ferme</button>
                        <button class="buildings_button" onclick="place_building('forest')">Placer une forêt</button>
                        <button class="buildings_button" onclick="place_building('industrial_area')">Placer une zone industrielle</button>
                        <button class="buildings_button" onclick="place_building('animals')">Placer un élevage</button>
                        <button class="buildings_button" onclick="remove_building()">Supprimer le bâtiment</button>
                    </div>
                </div>
                <div class="category" id="Selected_building_parameters_div">
                    <p class="category_title">Sélection</p>
                    <div id="selection_display_menu">
                        <div id="City_menu_div">
                            <div id="City_menu_size_div">
                                <div class="city_size_choice">
                                    <input type="radio" class="city_size_button" name="city_size" value="1" onChange="setting_changed('city_size',this.value)">
                                    <label for="html">Petite (1000 - 100 000 habitants)</label><br>
                                </div>
                                <div class="city_size_choice">
                                    <input type="radio" class="city_size_button" name="city_size" value="2" checked="checked" onChange="setting_changed('city_size',this.value)">
                                    <label for="css">Moyenne (100 000 - 500 000 habitants)</label><br>
                                </div>
                                <div class="city_size_choice">
                                    <input type="radio" class="city_size_button" name="city_size" value="3" onChange="setting_changed('city_size',this.value)">
                                    <label for="javascript">Grande (500 000 - 2 000 000 habitants)</label>
                                </div>
                            </div>
                            <p class="parameter_name"  id="nb_hab_label">Nombre d'habitants (100000)</p>
                            <input class="settings_range" id="nb_hab_input" type="range" min="10000" max="2000000" value="100000" step="10000" oninput="setting_changed('city_nb_hab', this.value)">
                            <p class="parameter_name"  id="conso_hab_label">Consommation par habitant (54 m³/an)</p>
                            <input class="settings_range" id="conso_hab_input" type="range" min="10" max="100" value="54" step="1" oninput="setting_changed('city_conso_hab', this.value)">
                            <p class="parameter_name"  id="city_density_label">Densité de la population (5000 hb/km²)</p>
                            <input class="settings_range" id="city_density_input" type="range" min="100" max="27000" value="5000" step="100" oninput="setting_changed('city_density', this.value)">
                            <p class="parameter_name"  id="city_green_cover_label">Couverture végétale (25 %)</p>
                            <input class="settings_range" id="city_green_cover_input" type="range" min="0" max="100" value="25" step="1" oninput="setting_changed('city_green_cover', this.value)">
                        </div>
                        <div id="Farm_menu_div">
                            <p class="parameter_name">Type de plantation</p>
                            <select class="settings_range" id="plantation_type_select" onchange="setting_changed('farm_plante', this.value)">
                                <option value="Blé">Blé</option>
                                <option value="Maïs">Maïs</option>
                                <option value="PDT">Pommes de terre</option>
                                <option value="Soja">Soja</option>
                                <option value="Tournesol">Tournesol</option>
                            </select>
                            <p class="parameter_name"  id="farm_cover_label">Couverture des plantations (1000 ha)</p>
                            <input class="settings_range" id="farm_cover_input" type="range" min="100" max="10000" value="1000" step="100" oninput="setting_changed('farm_cover', this.value)">
                        </div>
                        <div id="Forest_menu_div">
                            <p class="parameter_name">Type d'arbres</p>
                            <select class="settings_range" id="tree_type_select" onchange="setting_changed('forest_tree_type', this.value)">
                                <option value="Chêne">Chêne</option>
                                <option value="Hêtre">Hêtre</option>
                                <option value="Epicéa">Epicéa</option>
                            </select>
                            <p class="parameter_name"  id="forest_density_label">Densité de la forêt (50 %)</p>
                            <input class="settings_range" id="forest_density_input" type="range" min="1" max="100" value="50" step="1" oninput="setting_changed('forest_density', this.value)">
                        </div>
                        <div id="Industrial_area_menu_div">
                            <p class="parameter_name"  id="industrie_conso_label">Consommation par industrie (1500 m³)</p>
                            <input class="settings_range" id="industrie_conso_input" type="range" min="500" max="2500" value="1500" step="100" oninput="setting_changed('industry_conso', this.value)">
                            <p class="parameter_name"  id="industrie_size_label">Taille de chaque industrie (9 ha)</p>
                            <input class="settings_range" id="industrie_size_input" type="range" min="1" max="100" value="9" step="1" oninput="setting_changed('industry_size', this.value)">
                            <p class="parameter_name"  id="nb_industries_label">Nombre d'industrie (1)</p>
                            <input class="settings_range" id="nb_industries_input" type="range" min="1" max="1111" value="1" step="1" oninput="setting_changed('industry_number', this.value)">
                        </div>
                        <div id="Animals_menu_div">
                            <p class="parameter_name">Type d'animal</p>
                            <select class="settings_range" id="animal_type_select" onchange="setting_changed('animal_type', this.value)">
                                <option value="Vache">Vache</option>
                                <option value="Cochon">Cochon</option>
                                <option value="Cheval">Cheval</option>
                                <option value="Brebis">Brebis</option>
                                <option value="Poules">Poules (milliers)</option>
                            </select>
                            <p class="parameter_name"  id="nb_animals_label">Nombre d'animaux (100)</p>
                            <input class="settings_range" id="nb_animals_input" type="range" min="100" max="10000" value="100" step="100" oninput="setting_changed('nb_animals', this.value)">
                        </div>
                    </div>
                </div>
                
            </div>
            <div id="shrink_container">
                <button id="shrink_button" onclick="shrink_menu()"></button>
            </div>
        </div>
        <div id="game_window">
            <div id="game_display">
                <div id="game_part">
                    <div id="pave_3d">
                        <div class="cube_face" id="grid_3d_div"></div>
                        <div class="cube_face" id="cube_face_left"></div>
                        <div class="cube_face" id="cube_face_right"></div>
                    </div>
                </div>
                <div id="water_bar">
                    <p id="water_bar_quantity">65%</p>
                    <div id="water_bar_container">
                        <div id="water_bar_colored">
                            <div id="vagues"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="timeline_div">
                <div id="timeline">
                    <canvas id="water_timeline"></canvas>
                </div>
                <div id="time_buttons_div">
                    <img class="player_button" src="Images/slow_down.svg" onclick="slow_down()">
                    <img class="player_button" id="play_pause_button" src="Images/play.svg" onclick="play_pause()">
                    <img class="player_button" src="Images/speed_up.svg" onclick="speed_up()">
                </div>
            </div>
        </div>
    </div>
</body>

</html>
